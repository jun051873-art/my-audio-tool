<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°ˆå±¬ 1 è™Ÿ - æ¥µè‡´é›™é ç‰ˆ</title>
    <style>
        :root { --bg: #1c252e; --gold: #d4af37; --card: rgba(36, 47, 58, 0.95); }
        body { background: var(--bg); color: #fff; font-family: -apple-system; margin: 0; overflow: hidden; }
        
        .page { display: none; height: calc(100vh - 80px); padding: 25px; box-sizing: border-box; overflow-y: auto; }
        .page.active { display: block; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .glass-card { 
            background: var(--card); border-radius: 40px; border: 1px solid rgba(212, 175, 55, 0.3); 
            padding: 30px; backdrop-filter: blur(20px); position: relative; box-shadow: 0 30px 60px rgba(0,0,0,0.5);
        }

        /* æ’­æ”¾é å…ƒç´ ï¼šå­—é«”å¤§æ–¹ç›´è§€ */
        .album-art { width: 200px; height: 200px; margin: 0 auto 20px; border-radius: 30px; border: 1px solid var(--gold); background: #222; }
        .track-info { font-size: 1.4rem; font-weight: 300; margin-bottom: 5px; color: #fff; }
        .mode-text, .timer-text { font-size: 1rem; color: var(--gold); margin-top: 20px; cursor: pointer; letter-spacing: 2px; }
        
        /* æ§åˆ¶éˆ• */
        .play-btn { font-size: 3rem; color: var(--gold); background: none; border: none; margin: 20px 0; }

        /* æ­Œå–®é ï¼šåˆ†é¡èˆ‡åŒ¯å…¥ */
        .category-tab { display: inline-block; padding: 8px 15px; border: 1px solid var(--gold); border-radius: 50px; margin: 5px; font-size: 0.8rem; }
        .music-item { display: flex; justify-content: space-between; padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }

        /* åº•éƒ¨å°è¦½ */
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 80px; background: rgba(28,37,46,0.98); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid rgba(212,175,55,0.2); }
        .nav-item { color: #555; text-align: center; font-size: 0.8rem; }
        .nav-item.active { color: var(--gold); }
    </style>
</head>
<body>

    <div id="playPage" class="page active">
        <div class="glass-card" style="text-align: center;">
            <div class="album-art" id="art"></div>
            <div class="track-info" id="curTitle">ç­‰å¾…æ›²ç›®</div>
            <div style="color: #8899a6; font-size: 0.8rem;">Exclusive No.1 Player</div>
            
            <button class="play-btn" onclick="togglePlay()" id="playBtn">â–¶</button>
            
            <div class="mode-text" id="modeBtn" onclick="changeMode()">æ¨¡å¼ï¼šåˆ—è¡¨å¾ªç’°</div>
            
            <div class="timer-text" id="timerBtn" onclick="setSleepTimer()">å®šæ™‚ï¼šé—œé–‰</div>
        </div>
    </div>

    <div id="listPage" class="page">
        <div class="glass-card">
            <h2 style="font-weight: 200; color: var(--gold);">æ­Œå–®ç®¡ç†</h2>
            
            <div style="margin-bottom: 20px;">
                <label style="background: var(--gold); color: #1c252e; padding: 10px 20px; border-radius: 50px; font-weight: bold; font-size: 0.9rem;">
                    åŒ¯å…¥æœ¬æ©Ÿ MP3 <input type="file" multiple accept="audio/*" style="display:none" onchange="importAudio(event)">
                </label>
                <button onclick="createCat()" style="background:none; border:1px solid var(--gold); color:var(--gold); padding:8px 15px; border-radius:50px; margin-left:10px;">+ å»ºç«‹åˆ†é¡</button>
            </div>

            <div id="catList" style="margin-bottom: 15px;"></div>
            <div id="audioItems"></div>
        </div>
    </div>

    <div class="nav-bar">
        <div class="nav-item active" id="n1" onclick="switchPage('playPage','n1')"><div>ğŸµ</div>æ’­æ”¾</div>
        <div class="nav-item" id="n2" onclick="switchPage('listPage','n2')"><div>ğŸ“‚</div>æ­Œå–®</div>
    </div>

<script>
    let playlist = [];
    let curIndex = 0;
    let mode = 0; // 0: åˆ—è¡¨, 1: å–®æ›², 2: éš¨æ©Ÿ
    let timer = 0;
    const player = new Audio();

    function switchPage(p, n) {
        document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
        document.getElementById(p).classList.add('active');
        document.getElementById(n).classList.add('active');
    }

    function importAudio(e) {
        const files = Array.from(e.target.files);
        files.forEach(f => {
            playlist.push({ name: f.name, url: URL.createObjectURL(f), cat: 'å…¨éƒ¨' });
        });
        renderList();
    }

    function renderList() {
        const container = document.getElementById('audioItems');
        container.innerHTML = playlist.map((t, i) => `
            <div class="music-item" onclick="playMusic(${i})">
                <span>${t.name}</span>
                <span style="color:var(--gold);">â–¶</span>
            </div>
        `).join('');
    }

    function playMusic(i) {
        curIndex = i;
        player.src = playlist[i].url;
        document.getElementById('curTitle').innerText = playlist[i].name;
        player.play();
        document.getElementById('playBtn').innerText = "â¸";
        switchPage('playPage', 'n1');
    }

    function togglePlay() {
        if(player.paused) { player.play(); document.getElementById('playBtn').innerText = "â¸"; }
        else { player.pause(); document.getElementById('playBtn').innerText = "â–¶"; }
    }

    function changeMode() {
        mode = (mode + 1) % 3;
        const txt = ["æ¨¡å¼ï¼šåˆ—è¡¨å¾ªç’°", "æ¨¡å¼ï¼šå–®æ›²å¾ªç’°", "æ¨¡å¼ï¼šéš¨æ©Ÿæ’­æ”¾"];
        document.getElementById('modeBtn').innerText = txt[mode];
        player.loop = (mode === 1);
    }

    function setSleepTimer() {
        const times = [0, 15, 30, 60, 90];
        let cur = times.indexOf(timer);
        timer = times[(cur + 1) % times.length];
        document.getElementById('timerBtn').innerText = timer === 0 ? "å®šæ™‚ï¼šé—œé–‰" : `å®šæ™‚ï¼š${timer} åˆ†é˜å¾Œé—œé–‰`;
        
        clearTimeout(window.sleepLog);
        if(timer > 0) {
            window.sleepLog = setTimeout(() => {
                player.pause();
                document.getElementById('playBtn').innerText = "â–¶";
                alert("å°ˆå±¬ 1 è™Ÿï¼šå®šæ™‚ä¼‘æ¯æ™‚é–“åˆ°");
            }, timer * 60000);
        }
    }

    function createCat() {
        const name = prompt("è«‹è¼¸å…¥æ–°åˆ†é¡/æ­Œå–®åç¨±ï¼š");
        if(name) {
            const btn = document.createElement('span');
            btn.className = 'category-tab';
            btn.innerText = name;
            document.getElementById('catList').appendChild(btn);
        }
    }

    player.onended = () => {
        if(mode === 0) { curIndex = (curIndex + 1) % playlist.length; playMusic(curIndex); }
        if(mode === 2) { curIndex = Math.floor(Math.random() * playlist.length); playMusic(curIndex); }
    };
</script>
</body>
</html>
