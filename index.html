<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å°ˆå±¬ 1 è™Ÿ - ç©©å®šéŒ„éŸ³æ©Ÿ</title>
    <style>
        :root { --bg: #1c252e; --gold: #d4af37; }
        body { background-color: var(--bg); color: #fff; font-family: -apple-system; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .glass-card { width: 85%; max-width: 350px; padding: 40px; background: rgba(255,255,255,0.03); border-radius: 30px; border: 1px solid rgba(212,175,55,0.3); text-align: center; position: relative; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .record-circle { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--gold); margin: 30px auto; position: relative; cursor: pointer; display: flex; justify-content: center; align-items: center; transition: 0.3s; }
        .record-circle::after { content: ""; width: 20px; height: 20px; background: #ff4757; border-radius: 50%; transition: 0.3s; }
        .recording.record-circle::after { border-radius: 4px; transform: scale(1.2); }
        .recording.record-circle { box-shadow: 0 0 20px #ff4757; border-color: #ff4757; }
        #status { color: var(--gold); font-size: 0.9rem; letter-spacing: 1px; }
        #downloadArea { display: none; margin-top: 20px; }
        .save-btn { display: inline-block; margin-top: 15px; padding: 10px 25px; background: var(--gold); color: var(--bg); border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="glass-card">
    <h2 style="font-weight: 200; color: var(--gold);">é›¢ç·šéŸ³è¨Šæ“·å–</h2>
    <p style="font-size: 0.6rem; opacity: 0.5;">é»æ“Šä¸‹æ–¹åœ“åœˆé–‹å§‹/åœæ­¢éŒ„éŸ³</p>
    
    <div id="recordBtn" class="record-circle"></div>
    <div id="status">æº–å‚™å°±ç·’</div>

    <div id="downloadArea">
        <audio id="player" controls style="width:100%; filter:invert(1);"></audio>
        <a id="dlLink" class="save-btn">ğŸ“¥ å„²å­˜ç´”éŸ³è¨Š MP3</a>
    </div>
</div>

<script>
    let mediaRecorder;
    let chunks = [];
    const btn = document.getElementById('recordBtn');
    const status = document.getElementById('status');
    const downloadArea = document.getElementById('downloadArea');
    const player = document.getElementById('player');
    const dlLink = document.getElementById('dlLink');

    btn.onclick = async () => {
        if (!mediaRecorder || mediaRecorder.state === 'inactive') {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                
                mediaRecorder.ondataavailable = e => chunks.push(e.data);
                mediaRecorder.onstop = () => {
                    const blob = new Blob(chunks, { type: 'audio/mp3' });
                    const url = URL.createObjectURL(blob);
                    player.src = url;
                    dlLink.href = url;
                    dlLink.download = `å°ˆå±¬éŸ³è¨Š_${Date.now()}.mp3`;
                    downloadArea.style.display = 'block';
                    chunks = [];
                };

                mediaRecorder.start();
                btn.classList.add('recording');
                status.innerText = "æ­£åœ¨æ“·å–è²éŸ³...";
                downloadArea.style.display = 'none';
            } catch (err) {
                alert("è«‹å…è¨±éº¥å…‹é¢¨æ¬Šé™ä»¥é€²è¡ŒéŒ„è£½");
            }
        } else {
            mediaRecorder.stop();
            btn.classList.remove('recording');
            status.innerText = "å·²è½‰åŒ–ç‚ºè¼•é‡éŸ³è¨Šæª”";
            mediaRecorder.stream.getTracks().forEach(track => track.stop());
        }
    };
</script>
</body>
</html>
